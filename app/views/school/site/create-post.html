{% extends '../../layout.html' %}
{% block content %}
<!-- 面包屑 -->
<!-- END OF BREADCRUMBS -->
<div class="row">
    <div class="col-xs-12">
        <div class="panel panel-default shadow">
            <div class="panel-heading clearfix">
                <h4 class="panel-title">新建文章</h4>
            </div>
            <div class="panel-body">
                <form class="form-horizontal" id="postForm" method="post" name="postForm">
                    <input class="form-control validate"
                           type="hidden" name="image" id="coverImage" value="<<post.image>>"
                           data-display="封面图片"
                           data-rules="required"/>
                    <input type="hidden" value="<<post._id.toString()>>" id="postId" name="postId"/>
                    <div class="form-group">
                        <label class="col-xs-1 control-label" for="postTitle">文章标题：</label>

                        <div class="col-xs-8">
                            <input class="form-control validate" type="text" id="postTitle"
                                   value="<<post.title>>"
                                   name="title"
                                   data-rules="required"
                                   data-display="文章标题"
                                    >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-1 control-label" for="category">文章分类：</label>
                        <div class="col-xs-8">
                            <select name="category" id="category" class="form-control validate"
                                    data-rules="required"
                                    data-display="文章分类">
                                <option value="">选择栏目</option>
                                {% for category in categories %}
                                <option value="<<category._id.toString()>>"
                                        {% if post && post.category.toString()=== category._id.toString() %}
                                        selected{% endif %}
                                        {% if currentCategory=== category._id.toString() %}
                                        selected {%endif %}>

                                    <<category.name>>
                                </option>
                                {% endfor %}
                                {% if categories.length === 0 %}
                                {% endif %}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-1 control-label" for="visitCount">阅读次数：</label>

                        <div class="col-xs-8">
                            <input type="text" class="form-control validate" name="visitCount"
                                   id="visitCount" value="<<post && post.visitCount || 0>>"
                                   data-display="阅读次数"
                                   data-rules="required|integer">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-1 control-label" for="shareCount">分享次数：</label>

                        <div class="col-xs-8">
                            <input type="text" class="form-control" name="shareCount"
                                   id="shareCount" value="<<post && post.shareCount || 0>>"
                                   data-display="分享次数"
                                   data-rules="required|integer">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-1 control-label" for="like">点赞次数：</label>
                        <div class="col-xs-8">
                            <input type="text" class="form-control" name="like"
                                   id="like" value="<<post && post.like || 0>>"
                                   data-display="点赞次数"
                                   data-rules="required|integer">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-1 control-label" for="useSlide">首页文章：</label>
                        <div class="col-xs-8">
                            <input type="radio" name="isSlide" id="useSlide" value="1"
                                   {% if post && post.isSlide %} checked {% endif %}>
                            <span class="">是</span>
                            <input type="radio" name="isSlide" id="noSlide" value="0"
                                   {% if !post || !post.isSlide %} checked {% endif %}>
                            <span class="">否</span>
                        </div>
                    </div>
                    <div class="form-group images-cover">
                        <label class="col-xs-1 control-label">设置封面：</label>
                        <div class="col-xs-4">
                            <img class="b" width="345px" height="220px" id="indexImage"
                                 {% if post %}
                                 src="http://resource.hizuoye.com/<<post.image>>"
                                 {% else %}
                                 src="http://static.hizuoye.com/images/coverpage_default.png"
                                 {% endif %}>
                        </div>
                        <div class="col-xs-6">
                            <input type="file" id="imageUpload" class="image-upload">
                            <p class="m-t-lg">上传封面图片<span class="tip">(建议尺寸: 900像素x500像素)</span></p>
                            <p class="m-t-lg">一张漂亮的海报，能让你的活动锦上添花，带来更多用户报名
                                及增加传播效果</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-1 control-label">详细内容：</label>
                        <div class="col-xs-5">
                            {%include '../../components/weixinEditor.html' %}
                        </div>
                        <div class="col-xs-6">
                            <div class="textarea-container" id="content">
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="postContent" value="<<post && post.content>>">
                    <div class="form-group">
                        <div class="col-xs-4 m-t-md col-xs-offset-4">
                            <button type="submit" class="btn btn-default btn-block">
                                {% if post._id.toString().length > 0 %}
                                修改
                                {% else %}
                                发布
                                {% endif %}
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


{% endblock %}

{% block javascript %}
<script src="/js/lib/ueditor/ueditor.config.js"></script>
<script src="/js/lib/ueditor/ueditor.all.min.js"></script>
<script src="/js/entries/school/site/create-post.js"></script>

{% endblock %}
