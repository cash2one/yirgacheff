{% extends '../base.html' %}
{% block content %}
<!-- 面包屑 -->
{{ breadcrumb.init([{'url':'','title':'作业管理'},{'url':'','title':'作业检查'}]) }}
<!-- END OF BREADCRUMBS -->
<input type="hidden" name="homeworkId" id="homeworkId" value="{{homework._id.toString()}}"/>
<div class="row">
    <div class="col-xs-4">
        <div class="panel info-box panel-green">
            <div class="panel-body">
                <div class="info-box-stats">
                    <p class="counter">
                        <span>{{ homework.statistics.averageSpendSeconds | caculateTime('hour')}}</span><span class="thin">:</span>
                        <span>{{ homework.statistics.averageSpendSeconds | caculateTime('minute')}}</span><span class="thin">:</span>
                        <span>{{ homework.statistics.averageSpendSeconds | caculateTime('second')}}</span><span class="thin"></span>
                    </p>
                    <span class="info-box-title">平均完成时间</span>
                </div>
                <div class="info-box-icon">
                    <i class="fa fa-clock-o fa-5x"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-4">
        <div class="panel info-box panel-yellow">
            <div class="panel-body">
                <div class="info-box-stats">
                    <p class="counter">{{(homework.statistics.finishRate * 100).toFixed(0)}}%</p>
                    <span class="info-box-title">作业完成率</span>
                </div>
                <div class="info-box-icon">
                    <i class="fa fa-flag-o fa-5x"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-4">
        <div class="panel info-box panel-blue">
            <div class="panel-body">
                <div class="info-box-stats">
                    <p class="counter">{{(homework.statistics.wrongRate * 100).toFixed(0)}}%</p>
                    <span class="info-box-title">平均错误率</span>
                </div>
                <div class="info-box-icon">
                    <i class="fa fa-frown-o fa-5x"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-12">
        <div class="panel panel-white">
            <div class="panel-heading clearfix">
                <h4 class="panel-title"><i class="fa fa-bar-chart m-r-xs"></i>作业错误率分布</h4>
            </div>
            <div class="panel-body">
                <div id="column-chart"></div>
            </div>
        </div>
    </div>
    <div class="col-xs-12">
        <div class="panel panel-white">
            <div class="panel-heading clearfix">
                <h4 class="panel-title"><i class="fa fa-table m-r-xs"></i>学生完成情况</h4>
            </div>
            <div class="panel-body">
                <table id="homework-list"
                       class="table"
                       data-toggle="table">
                    <thead>
                    <tr>
                        <th>姓名</th>
                        <th>学号</th>
                        <th>完成情况</th>
                        <th>完成时间</th>
                        <th>操作</th>
                    </tr>
                    </thead>

                    <tbody>
                    {% for performance in homework.performances %}
                    <tr>
                        <td>{{performance.student.displayName}}</td>
                        <td>{{performance.student.username}}</td>
                        <td>
                            {% if performance.state === 1 %}
                            完成
                            {% elif performance.state === 2 %}
                            已检查
                            {% else %}
                            未完成
                            {% endif %}
                        </td>
                        <td>
                            {% if performance.state === 0 %}
                            -
                            {% else %}
                            {{performance.finishedTime | date('Y-m-d H:i:s', -480, 'CCT')}}
                            {% endif %}
                        </td>
                        <td>
                            {% if performance.state !== 0 %}
                            <a class="btn btn-info btn-xs"
                               href="/teacher/homework/{{homework._id.toString()}}/students/{{performance.student._id.toString()}}">详情</a>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
                <div class="row m-t-lg">
                    <div class="col-xs-offset-5 col-xs-2">
                        <a class="btn btn-default" href="/teacher/homework/history">返回列表</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascript %}

<script src="/js/entries/teacher/homework/view-classDetail-history.js"></script>

{% endblock %}
